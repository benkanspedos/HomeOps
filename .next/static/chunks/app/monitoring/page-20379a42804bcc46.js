(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{71269:function(e,s,t){Promise.resolve().then(t.bind(t,2927))},2927:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return ex}});var a=t(57437),l=t(2265),r=t(96549),n=t(69976),i=t(74979),c=t(57883),d=t(94693),o=t(64308),m=t(70571),x=t(94207),u=t(76780),h=t(40933),j=t(98094),p=t(42555),f=t(45188),g=t(96753),y=t(22023),v=t(5353),N=t(46290),b=t(19573);function w(e){let{container:s,metrics:t,onRestart:r,onStop:n,onViewLogs:i,onViewDetails:w}=e,[C,k]=(0,l.useState)(!1),Z=e=>{switch(k(!1),e){case"restart":null==r||r(s.id);break;case"stop":null==n||n(s.id);break;case"logs":null==i||i(s.id);break;case"details":null==w||w(s.id)}};return(0,a.jsxs)(c.Zb,{className:"p-4 hover:shadow-lg transition-shadow",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat((()=>{switch(s.status){case"running":return"text-green-500 bg-green-500/10";case"stopped":return"text-red-500 bg-red-500/10";case"paused":return"text-yellow-500 bg-yellow-500/10";case"error":return"text-red-600 bg-red-600/10";default:return"text-gray-500 bg-gray-500/10"}})()),children:"running"===s.status?(0,a.jsx)(j.Z,{className:"w-5 h-5"}):"stopped"===s.status?(0,a.jsx)(p.Z,{className:"w-5 h-5"}):(0,a.jsx)(x.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-sm",children:s.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:s.image})]})]}),(0,a.jsxs)(b.J2,{open:C,onOpenChange:k,children:[(0,a.jsx)(b.xo,{asChild:!0,children:(0,a.jsx)(o.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(b.yk,{className:"w-40 p-1",align:"end",children:[(0,a.jsxs)(o.z,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>Z("restart"),disabled:"running"!==s.status,children:[(0,a.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Restart"]}),(0,a.jsxs)(o.z,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>Z("stop"),disabled:"running"!==s.status,children:[(0,a.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Stop"]}),(0,a.jsxs)(o.z,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>Z("logs"),children:[(0,a.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"View Logs"]}),(0,a.jsxs)(o.z,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>Z("details"),children:[(0,a.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Details"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,a.jsx)(d.C,{variant:"running"===s.status?"default":"secondary",className:"text-xs",children:s.status}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(()=>{switch(s.health){case"healthy":return(0,a.jsx)(x.Z,{className:"w-4 h-4 text-green-500"});case"unhealthy":return(0,a.jsx)(u.Z,{className:"w-4 h-4 text-red-500"});case"starting":return(0,a.jsx)(h.Z,{className:"w-4 h-4 text-yellow-500"});default:return(0,a.jsx)(x.Z,{className:"w-4 h-4 text-gray-400"})}})(),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:s.health})]}),s.uptime>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.Z,{className:"w-3 h-3 text-gray-400"}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:(e=>{let s=Math.floor(e/86400),t=Math.floor(e%86400/3600),a=Math.floor(e%3600/60);return s>0?"".concat(s,"d ").concat(t,"h"):t>0?"".concat(t,"h ").concat(a,"m"):"".concat(a,"m")})(s.uptime)})]})]}),t&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(v.Z,{className:"w-3 h-3 text-gray-400"}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"CPU"})]}),(0,a.jsxs)("span",{className:"text-xs font-medium",children:[t.cpuPercent.toFixed(1),"%"]})]}),(0,a.jsx)(m.E,{value:t.cpuPercent,className:"h-1.5"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(N.Z,{className:"w-3 h-3 text-gray-400"}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"Memory"})]}),(0,a.jsxs)("span",{className:"text-xs font-medium",children:[t.memoryUsageMB.toFixed(0)," MB"]})]}),(0,a.jsx)(m.E,{value:t.memoryPercent,className:"h-1.5"})]}),s.restartCount>0&&(0,a.jsx)("div",{className:"mt-2 pt-2 border-t",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"Restart Count"}),(0,a.jsx)(d.C,{variant:s.restartCount>5?"destructive":"secondary",className:"text-xs",children:s.restartCount})]})})]})}var C=t(97589);function k(e){let{metrics:s,type:t,thresholds:l={warning:70,critical:85}}=e;if(!s)return(0,a.jsx)(c.Zb,{className:"p-4",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Loading metrics..."})})});let r=Math.min(100,Math.max(0,(()=>{switch(t){case"cpu":return s.totalCPU;case"memory":return s.memoryPercent;case"disk":return s.diskPercent;default:return 0}})())),n=58*Math.PI,i=r>=l.critical?"#ef4444":r>=l.warning?"#f59e0b":"#10b981";return(0,a.jsxs)(c.Zb,{className:"p-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"text-gray-600",children:(()=>{switch(t){case"cpu":return(0,a.jsx)(v.Z,{className:"w-5 h-5"});case"memory":return(0,a.jsx)(N.Z,{className:"w-5 h-5"});case"disk":return(0,a.jsx)(C.Z,{className:"w-5 h-5"});default:return null}})()}),(0,a.jsx)("h3",{className:"font-medium text-sm",children:(()=>{switch(t){case"cpu":return"CPU Usage";case"memory":return"Memory Usage";case"disk":return"Disk Usage";default:return""}})()})]})}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("svg",{height:90,width:90,className:"transform -rotate-90",children:[(0,a.jsx)("circle",{stroke:"#e5e7eb",fill:"transparent",strokeWidth:8,r:29,cx:45,cy:45}),(0,a.jsx)("circle",{stroke:i,fill:"transparent",strokeWidth:8,strokeDasharray:"".concat(n," ").concat(n),style:{strokeDashoffset:n-r/100*n,transition:"stroke-dashoffset 0.5s ease"},r:29,cx:45,cy:45,strokeLinecap:"round"})]}),(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,a.jsxs)("span",{className:"text-2xl font-bold",style:{color:i},children:[r.toFixed(0),"%"]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 text-center mt-0.5",children:(()=>{switch(t){case"cpu":return"".concat(s.runningContainers," containers");case"memory":return"".concat(s.usedMemoryMB.toFixed(0)," / ").concat(s.totalMemoryMB.toFixed(0)," MB");case"disk":return"".concat(s.diskUsageMB.toFixed(0)," MB used");default:return""}})()})]})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-3 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Normal"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),(0,a.jsxs)("span",{className:"text-gray-600",children:[">",l.warning,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500"}),(0,a.jsxs)("span",{className:"text-gray-600",children:[">",l.critical,"%"]})]})]})]})}var Z=t(92474),M=t(99156),S=t(26975),z=t(46294),T=t(92940),A=t(71935),E=t(54817),D=t(404);function R(e){let{history:s,onLoadMore:t,onFilter:r,loading:n=!1}=e,[i,m]=(0,l.useState)(""),[x,j]=(0,l.useState)("all"),[p,f]=(0,l.useState)("all"),g=e=>{switch(e){case"sent":return(0,a.jsx)(T.Z,{className:"w-4 h-4 text-green-500"});case"failed":return(0,a.jsx)(A.Z,{className:"w-4 h-4 text-red-500"});case"suppressed":return(0,a.jsx)(h.Z,{className:"w-4 h-4 text-yellow-500"});default:return(0,a.jsx)(u.Z,{className:"w-4 h-4 text-gray-500"})}},y=e=>{switch(e){case"sent":return(0,a.jsx)(d.C,{className:"bg-green-500/10 text-green-600",children:"Sent"});case"failed":return(0,a.jsx)(d.C,{variant:"destructive",children:"Failed"});case"suppressed":return(0,a.jsx)(d.C,{className:"bg-yellow-500/10 text-yellow-600",children:"Suppressed"});default:return(0,a.jsx)(d.C,{variant:"secondary",children:e})}},v=e=>{let s=new Date(e),t=new Date().getTime()-s.getTime();return t<6e4?"Just now":t<36e5?"".concat(Math.floor(t/6e4),"m ago"):t<864e5?"".concat(Math.floor(t/36e5),"h ago"):s.toLocaleDateString()},N=s.filter(e=>{let s=""===i||e.alertName.toLowerCase().includes(i.toLowerCase())||e.message.toLowerCase().includes(i.toLowerCase()),t="all"===x||e.status===x;return s&&t});return(0,a.jsxs)(c.Zb,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Alert History"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(E.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(M.I,{type:"text",placeholder:"Search alerts...",value:i,onChange:e=>m(e.target.value),className:"pl-9 w-64"})]}),(0,a.jsxs)(z.Ph,{value:x,onValueChange:j,children:[(0,a.jsxs)(z.i4,{className:"w-32",children:[(0,a.jsx)(D.Z,{className:"w-4 h-4 mr-2"}),(0,a.jsx)(z.ki,{})]}),(0,a.jsxs)(z.Bw,{children:[(0,a.jsx)(z.Ql,{value:"all",children:"All Status"}),(0,a.jsx)(z.Ql,{value:"sent",children:"Sent"}),(0,a.jsx)(z.Ql,{value:"failed",children:"Failed"}),(0,a.jsx)(z.Ql,{value:"suppressed",children:"Suppressed"})]})]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(S.iA,{children:[(0,a.jsx)(S.xD,{children:(0,a.jsxs)(S.SC,{children:[(0,a.jsx)(S.ss,{children:"Alert"}),(0,a.jsx)(S.ss,{children:"Time"}),(0,a.jsx)(S.ss,{children:"Value"}),(0,a.jsx)(S.ss,{children:"Status"}),(0,a.jsx)(S.ss,{children:"Channels"}),(0,a.jsx)(S.ss,{className:"w-[300px]",children:"Message"})]})}),(0,a.jsxs)(S.RM,{children:[N.map(e=>(0,a.jsxs)(S.SC,{children:[(0,a.jsx)(S.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[g(e.status),(0,a.jsx)("span",{className:"font-medium text-sm",children:e.alertName})]})}),(0,a.jsx)(S.pj,{children:(0,a.jsx)("span",{className:"text-sm text-gray-600",children:v(e.triggeredAt)})}),(0,a.jsx)(S.pj,{children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:e.metricValue.toFixed(1)}),(0,a.jsxs)("span",{className:"text-gray-500",children:[" / ",e.thresholdValue]})]})}),(0,a.jsx)(S.pj,{children:y(e.status)}),(0,a.jsx)(S.pj,{children:(0,a.jsx)("div",{className:"flex gap-1",children:e.channels.map((e,s)=>(0,a.jsx)(d.C,{variant:"outline",className:"text-xs",children:e},s))})}),(0,a.jsxs)(S.pj,{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 truncate max-w-xs",title:e.message,children:e.message}),e.error&&(0,a.jsxs)("p",{className:"text-xs text-red-500 mt-1",children:["Error: ",e.error]})]})]},e.id)),0===N.length&&(0,a.jsx)(S.SC,{children:(0,a.jsxs)(S.pj,{colSpan:6,className:"text-center py-8",children:[(0,a.jsx)(u.Z,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No alerts found"})]})})]})]})}),t&&N.length>0&&(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsx)(o.z,{variant:"outline",onClick:t,disabled:n,children:n?"Loading...":"Load More"})})]})}var P=t(34446),U=t(21513),L=t(4086),F=t(47390),H=t(26969),_=t(55430),V=t(6600),O=t(92513),B=t(60497),I=t(6649),q=t(10883),Q=t(74697),W=t(22468);let K=[{value:"cpu",label:"CPU Usage (%)",icon:"\uD83D\uDDA5️"},{value:"memory",label:"Memory Usage (%)",icon:"\uD83D\uDCBE"},{value:"disk",label:"Disk Usage (%)",icon:"\uD83D\uDCBF"},{value:"network",label:"Network Traffic (MB)",icon:"\uD83C\uDF10"},{value:"restart_count",label:"Restart Count",icon:"\uD83D\uDD04"},{value:"container_status",label:"Container Status",icon:"\uD83D\uDCE6"},{value:"health_check",label:"Health Check",icon:"❤️"}],G=[{value:">",label:"Greater than"},{value:">=",label:"Greater than or equal"},{value:"<",label:"Less than"},{value:"<=",label:"Less than or equal"},{value:"=",label:"Equal to"},{value:"!=",label:"Not equal to"}],J=[{value:"low",label:"Low",color:"bg-green-100 text-green-800"},{value:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"High",color:"bg-orange-100 text-orange-800"},{value:"critical",label:"Critical",color:"bg-red-100 text-red-800"}],Y=[{type:"email",label:"Email",icon:L.Z,color:"text-blue-500"},{type:"slack",label:"Slack",icon:F.Z,color:"text-green-500"},{type:"webhook",label:"Webhook",icon:H.Z,color:"text-purple-500"},{type:"discord",label:"Discord",icon:_.Z,color:"text-indigo-500"}];function X(e){var s;let{className:t,onAlertConfigured:r,onAlertDeleted:n,onAlertTested:i}=e,[m,x]=(0,l.useState)([]),[u,j]=(0,l.useState)(!1),[p,f]=(0,l.useState)(null),[g,y]=(0,l.useState)(""),[v,N]=(0,l.useState)("all"),[b,w]=(0,l.useState)("all"),[C,k]=(0,l.useState)({name:"",enabled:!0,metricType:"cpu",thresholdValue:80,comparisonOperator:">",priority:"medium",cooldownMinutes:15,channels:[],description:""});(0,l.useEffect)(()=>{Z()},[]);let Z=async()=>{try{x([{id:"1",name:"High CPU Usage",enabled:!0,metricType:"cpu",thresholdValue:80,comparisonOperator:">",priority:"high",cooldownMinutes:15,channels:[{type:"email",enabled:!0,config:{to:"admin@homeops.com"}}],description:"Alert when CPU usage exceeds 80%"},{id:"2",name:"Memory Critical",enabled:!0,metricType:"memory",thresholdValue:90,comparisonOperator:">",priority:"critical",cooldownMinutes:10,channels:[{type:"slack",enabled:!0,config:{webhookUrl:"https://hooks.slack.com/..."}},{type:"email",enabled:!0,config:{to:"admin@homeops.com"}}],description:"Critical alert for memory usage above 90%"},{id:"3",name:"Container Restart Loop",enabled:!1,metricType:"restart_count",thresholdValue:5,comparisonOperator:">",priority:"high",cooldownMinutes:30,channels:[{type:"webhook",enabled:!0,config:{url:"https://api.homeops.com/alerts"}}],description:"Alert when container restarts more than 5 times"}])}catch(e){console.error("Failed to load alerts:",e)}},S=e=>{f(e),j(!1),k(e)},z=async()=>{try{if(p){let e=m.map(e=>e.id===p.id?{...C,id:p.id}:e);x(e)}else{let e={...C,id:"alert-".concat(Date.now())};x([...m,e])}r&&r(C),j(!1),f(null)}catch(e){console.error("Failed to save alert:",e)}},T=async e=>{try{x(m.filter(s=>s.id!==e)),n&&n(e)}catch(e){console.error("Failed to delete alert:",e)}},A=async e=>{try{i&&i(e),e("Test alert sent successfully!")}catch(s){console.error("Failed to test alert:",s),e("Failed to send test alert")}},R=async e=>{x(m.map(s=>s.id===e?{...s,enabled:!s.enabled}:s))},L=e=>{k({...C,channels:[...C.channels||[],{type:e,enabled:!0,config:{}}]})},F=e=>{var s;let t=(null===(s=C.channels)||void 0===s?void 0:s.filter((s,t)=>t!==e))||[];k({...C,channels:t})},H=(e,s)=>{var t;let a=(null===(t=C.channels)||void 0===t?void 0:t.map((t,a)=>a===e?{...t,...s}:t))||[];k({...C,channels:a})},_=m.filter(e=>{if(g&&!e.name.toLowerCase().includes(g.toLowerCase())||"all"!==v&&e.priority!==v)return!1;if("all"!==b){let s="enabled"===b;if(e.enabled!==s)return!1}return!0}),X=e=>{var s;return(null===(s=J.find(s=>s.value===e))||void 0===s?void 0:s.color)||"bg-gray-100 text-gray-800"},$=e=>{let s=Y.find(s=>s.type===e);return s?s.icon:V.Z},ee=e=>{var s;return(null===(s=Y.find(s=>s.type===e))||void 0===s?void 0:s.color)||"text-gray-500"};return(0,a.jsxs)("div",{className:"space-y-6 ".concat(t),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold flex items-center space-x-2",children:[(0,a.jsx)(V.Z,{size:24}),(0,a.jsx)("span",{children:"Alert Management"})]}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Configure alerts for system monitoring"})]}),(0,a.jsxs)(o.z,{onClick:()=>{j(!0),f(null),k({name:"",enabled:!0,metricType:"cpu",thresholdValue:80,comparisonOperator:">",priority:"medium",cooldownMinutes:15,channels:[],description:""})},className:"flex items-center space-x-2",children:[(0,a.jsx)(O.Z,{size:16}),(0,a.jsx)("span",{children:"Create Alert"})]})]}),(0,a.jsx)(c.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(E.Z,{size:16,className:"text-gray-400"}),(0,a.jsx)(M.I,{placeholder:"Search alerts...",value:g,onChange:e=>y(e.target.value),className:"w-64"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(D.Z,{size:16,className:"text-gray-400"}),(0,a.jsxs)("select",{value:v,onChange:e=>N(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Priorities"}),J.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("select",{value:b,onChange:e=>w(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Statuses"}),(0,a.jsx)("option",{value:"enabled",children:"Enabled Only"}),(0,a.jsx)("option",{value:"disabled",children:"Disabled Only"})]})}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[_.length," of ",m.length," alerts"]})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:(0,a.jsx)(P.M,{children:_.map(e=>{var s;return(0,a.jsxs)(U.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white border rounded-lg p-6 hover:shadow-lg transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mt-2 ".concat(e.enabled?"bg-green-500":"bg-gray-300")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)(d.C,{className:X(e.priority),children:e.priority})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Metric:"}),(0,a.jsx)("span",{className:"font-medium",children:(null===(s=K.find(s=>s.value===e.metricType))||void 0===s?void 0:s.label)||e.metricType})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Threshold:"}),(0,a.jsxs)("span",{className:"font-medium",children:[e.comparisonOperator," ",e.thresholdValue,e.metricType.includes("percent")||"cpu"===e.metricType||"memory"===e.metricType||"disk"===e.metricType?"%":""]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Cooldown:"}),(0,a.jsxs)("span",{className:"font-medium flex items-center space-x-1",children:[(0,a.jsx)(h.Z,{size:12}),(0,a.jsxs)("span",{children:[e.cooldownMinutes||15," min"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Channels:"}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:e.channels.map((e,s)=>{let t=$(e.type);return(0,a.jsx)("div",{className:"p-1 rounded ".concat(e.enabled?ee(e.type):"text-gray-300"),title:e.type,children:(0,a.jsx)(t,{size:16})},s)})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-100",children:[(0,a.jsx)(o.z,{onClick:()=>R(e.id),variant:e.enabled?"outline":"default",size:"sm",children:e.enabled?"Disable":"Enable"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.z,{onClick:()=>A(e),variant:"ghost",size:"sm",children:(0,a.jsx)(B.Z,{size:16})}),(0,a.jsx)(o.z,{onClick:()=>S(e),variant:"ghost",size:"sm",children:(0,a.jsx)(I.Z,{size:16})}),(0,a.jsx)(o.z,{onClick:()=>T(e.id),variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700",children:(0,a.jsx)(q.Z,{size:16})})]})]})]},e.id)})})}),(0,a.jsx)(P.M,{children:(u||p)&&(0,a.jsx)(U.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)(U.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-semibold",children:p?"Edit Alert":"Create New Alert"})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alert Name *"}),(0,a.jsx)(M.I,{value:C.name,onChange:e=>k({...C,name:e.target.value}),placeholder:"Enter alert name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,a.jsx)("select",{value:C.priority,onChange:e=>k({...C,priority:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:J.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Metric Type *"}),(0,a.jsx)("select",{value:C.metricType,onChange:e=>k({...C,metricType:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:K.map(e=>(0,a.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Condition"}),(0,a.jsx)("select",{value:C.comparisonOperator,onChange:e=>k({...C,comparisonOperator:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:G.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Threshold Value *"}),(0,a.jsx)(M.I,{type:"number",value:C.thresholdValue,onChange:e=>k({...C,thresholdValue:Number(e.target.value)}),placeholder:"Enter threshold"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("textarea",{value:C.description,onChange:e=>k({...C,description:e.target.value}),placeholder:"Optional description for this alert",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Notification Channels"}),(0,a.jsx)("div",{className:"flex space-x-2",children:Y.map(e=>(0,a.jsx)(o.z,{onClick:()=>L(e.type),variant:"ghost",size:"sm",className:e.color,children:(0,a.jsx)(e.icon,{size:16})},e.type))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[null===(s=C.channels)||void 0===s?void 0:s.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-md",children:[(0,a.jsx)("div",{className:"p-2 rounded ".concat(ee(e.type)),children:l.createElement($(e.type),{size:16})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-sm capitalize",children:e.type}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["email"===e.type&&"Email notifications","slack"===e.type&&"Slack webhook","webhook"===e.type&&"HTTP webhook","discord"===e.type&&"Discord webhook"]})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:e.enabled,onChange:e=>H(s,{enabled:e.target.checked}),className:"mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:"Enabled"})]}),(0,a.jsx)(o.z,{onClick:()=>F(s),variant:"ghost",size:"sm",className:"text-red-500",children:(0,a.jsx)(Q.Z,{size:16})})]},s)),(!C.channels||0===C.channels.length)&&(0,a.jsx)("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No notification channels configured. Click the icons above to add channels."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cooldown Period (minutes)"}),(0,a.jsx)(M.I,{type:"number",value:C.cooldownMinutes,onChange:e=>k({...C,cooldownMinutes:Number(e.target.value)}),placeholder:"15",min:"1",max:"1440"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum time between alert notifications for the same condition"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,a.jsx)(o.z,{onClick:()=>{j(!1),f(null)},variant:"outline",children:"Cancel"}),(0,a.jsxs)(o.z,{onClick:z,disabled:!C.name||!C.thresholdValue,children:[(0,a.jsx)(W.Z,{size:16,className:"mr-2"}),p?"Update Alert":"Create Alert"]})]})]})})})]})}var $=t(45040);let ee={url:"http://localhost:3101/api",autoConnect:!0,reconnectionAttempts:5,reconnectionDelay:1e3};var es=t(66706),et=t(36127),ea=t(56160),el=t(74740),er=t(24841),en=t(46143),ei=t(75733);function ec(e){var s,t,r,n,i,m,u,p,f,g,y,b,w,k,Z;let{className:M}=e,{isConnected:S,realTimeData:z,lastUpdate:E,subscribeToRealTime:D,unsubscribeFromRealTime:R,requestMetrics:L,requestContainerLogs:F}=function(){let e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s={...ee,...e},[t,a]=(0,l.useState)(null),[r,n]=(0,l.useState)(!1),i=(0,l.useRef)(new Map),c=(0,l.useCallback)(()=>{if(null==t?void 0:t.connected)return;let e=(0,$.io)(s.url,{transports:["websocket","polling"],timeout:2e4,forceNew:!0});e.on("connect",()=>{console.log("Connected to WebSocket server"),n(!0)}),e.on("disconnect",e=>{console.log("Disconnected from WebSocket server:",e),n(!1)}),e.on("connect_error",e=>{console.error("WebSocket connection error:",e),n(!1)}),e.on("reconnect",e=>{console.log("Reconnected to WebSocket server, attempt:",e),n(!0)}),e.on("reconnect_error",e=>{console.error("WebSocket reconnection error:",e)}),e.on("reconnect_failed",()=>{console.error("Failed to reconnect to WebSocket server"),n(!1)}),a(e)},[s.url,t]),d=(0,l.useCallback)(()=>{t&&(t.disconnect(),a(null),n(!1))},[t]),o=(0,l.useCallback)((e,s)=>{(null==t?void 0:t.connected)?t.emit(e,s):console.warn("WebSocket not connected, cannot emit event:",e)},[t]),m=(0,l.useCallback)((e,s)=>{if(t){t.on(e,s);let a=i.current.get(e)||[];return a.push(s),i.current.set(e,a),()=>{t.off(e,s);let a=(i.current.get(e)||[]).filter(e=>e!==s);a.length>0?i.current.set(e,a):i.current.delete(e)}}return()=>{}},[t]),x=(0,l.useCallback)(e=>{t&&(t.off(e),i.current.delete(e))},[t]);return(0,l.useEffect)(()=>(s.autoConnect&&c(),()=>{d()}),[s.autoConnect,c,d]),(0,l.useEffect)(()=>()=>{i.current.clear()},[]),{socket:t,isConnected:r,connect:c,disconnect:d,emit:o,on:m,off:x}}(),[s,t]=(0,l.useState)(null),[a,r]=(0,l.useState)(null),n=(0,l.useCallback)(function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;e.emit("subscribe:real-time",{interval:s})},[e]),i=(0,l.useCallback)(()=>{e.emit("unsubscribe:real-time")},[e]),c=(0,l.useCallback)(()=>{e.emit("request:metrics")},[e]),d=(0,l.useCallback)(function(s){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;e.emit("request:container-logs",{containerId:s,lines:t})},[e]),o=(0,l.useCallback)(function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24,t=arguments.length>1?arguments[1]:void 0;e.emit("request:alert-history",{hours:s,alertId:t})},[e]);return(0,l.useEffect)(()=>{if(!e.socket)return;let s=[];return s.push(e.on("initial:data",e=>{t(e),r(new Date)})),s.push(e.on("metrics:update",e=>{t(s=>({...s,...e})),r(new Date)})),s.push(e.on("alert:broadcast",e=>{console.log("Real-time alert received:",e)})),s.push(e.on("system:status",e=>{console.log("System status update:",e)})),s.push(e.on("error",e=>{console.error("WebSocket error:",e)})),()=>{s.forEach(e=>e())}},[e]),{...e,realTimeData:s,lastUpdate:a,subscribeToRealTime:n,unsubscribeFromRealTime:i,requestMetrics:c,requestContainerLogs:d,requestAlertHistory:o}}(),[H,_]=(0,l.useState)(!0),[V,O]=(0,l.useState)(5e3),[B,I]=(0,l.useState)(null),[q,Q]=(0,l.useState)({});(0,l.useEffect)(()=>(S&&H?D(V):S&&!H&&R(),()=>{S&&R()}),[S,H,V,D,R]);let W=e=>{F(e,50),I(e)},K=e=>{switch(null==e?void 0:e.toLowerCase()){case"running":return(0,a.jsx)(T.Z,{className:"text-green-500",size:20});case"exited":case"stopped":return(0,a.jsx)(A.Z,{className:"text-red-500",size:20});case"restarting":return(0,a.jsx)(es.Z,{className:"text-yellow-500 animate-spin",size:20});default:return(0,a.jsx)(et.Z,{className:"text-gray-500",size:20})}},G=e=>{switch(null==e?void 0:e.toLowerCase()){case"healthy":return"text-green-500 bg-green-500/10";case"unhealthy":return"text-red-500 bg-red-500/10";case"starting":return"text-yellow-500 bg-yellow-500/10";default:return"text-gray-500 bg-gray-500/10"}},J=e=>{if(!e)return"0m";let s=Math.floor(e/86400),t=Math.floor(e%86400/3600),a=Math.floor(e%3600/60);return s>0?"".concat(s,"d ").concat(t,"h"):t>0?"".concat(t,"h ").concat(a,"m"):"".concat(a,"m")},Y=e=>{if(!e||0===e)return"0 B";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["B","KB","MB","GB"][s]};return z?(0,a.jsxs)("div",{className:"space-y-6 ".concat(M),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold flex items-center space-x-2",children:[(0,a.jsx)(x.Z,{size:24}),(0,a.jsx)("span",{children:"Real-Time Monitoring"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ea.Z,{size:16,className:"text-green-500"}),(0,a.jsx)("span",{className:"text-green-600",children:"Connected"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(el.Z,{size:16,className:"text-red-500"}),(0,a.jsx)("span",{className:"text-red-600",children:"Disconnected"})]}),E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"•"}),(0,a.jsx)(h.Z,{size:14,className:"text-gray-400"}),(0,a.jsx)("span",{className:"text-gray-600",children:E.toLocaleTimeString()})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("select",{value:V,onChange:e=>O(Number(e.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md text-sm bg-white",disabled:!H,children:[(0,a.jsx)("option",{value:1e3,children:"1s"}),(0,a.jsx)("option",{value:2e3,children:"2s"}),(0,a.jsx)("option",{value:5e3,children:"5s"}),(0,a.jsx)("option",{value:1e4,children:"10s"}),(0,a.jsx)("option",{value:3e4,children:"30s"})]}),(0,a.jsxs)(o.z,{onClick:()=>{_(!H)},variant:H?"default":"outline",size:"sm",className:"flex items-center space-x-2",children:[H?(0,a.jsx)(er.Z,{size:16}):(0,a.jsx)(j.Z,{size:16}),(0,a.jsx)("span",{children:H?"Pause":"Resume"})]}),(0,a.jsx)(o.z,{onClick:()=>{L()},variant:"outline",size:"sm",disabled:!S,children:(0,a.jsx)(es.Z,{size:16})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(U.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,a.jsxs)(c.Zb,{className:"p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(en.Z,{className:"text-blue-500",size:24}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Containers"})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[(null===(s=z.system)||void 0===s?void 0:s.runningContainers)||0,"/",(null===(t=z.system)||void 0===t?void 0:t.containerCount)||0]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Running / Total"})]})]})}),(0,a.jsx)(U.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:(0,a.jsxs)(c.Zb,{className:"p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(v.Z,{className:"text-green-500",size:24}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"CPU"})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[(null===(n=z.system)||void 0===n?void 0:null===(r=n.totalCPU)||void 0===r?void 0:r.toFixed(1))||"0.0","%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(Math.min((null===(i=z.system)||void 0===i?void 0:i.totalCPU)||0,100),"%")}})})]})]})}),(0,a.jsx)(U.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:(0,a.jsxs)(c.Zb,{className:"p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(N.Z,{className:"text-yellow-500",size:24}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Memory"})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[(null===(u=z.system)||void 0===u?void 0:null===(m=u.memoryPercent)||void 0===m?void 0:m.toFixed(1))||"0.0","%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-yellow-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(Math.min((null===(p=z.system)||void 0===p?void 0:p.memoryPercent)||0,100),"%")}})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[Y(1048576*((null===(f=z.system)||void 0===f?void 0:f.usedMemoryMB)||0))," /",Y(1048576*((null===(g=z.system)||void 0===g?void 0:g.totalMemoryMB)||0))]})]})]})}),(0,a.jsx)(U.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:(0,a.jsxs)(c.Zb,{className:"p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(C.Z,{className:"text-purple-500",size:24}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Disk"})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[(null===(b=z.system)||void 0===b?void 0:null===(y=b.diskPercent)||void 0===y?void 0:y.toFixed(1))||"0.0","%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-purple-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(Math.min((null===(w=z.system)||void 0===w?void 0:w.diskPercent)||0,100),"%")}})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[Y(1048576*((null===(k=z.system)||void 0===k?void 0:k.diskUsageMB)||0))," used"]})]})]})})]}),(0,a.jsxs)(c.Zb,{className:"overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("h3",{className:"text-lg font-medium flex items-center space-x-2",children:[(0,a.jsx)(en.Z,{size:20}),(0,a.jsx)("span",{children:"Container Health Status"})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-900",children:"Status"}),(0,a.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-900",children:"Container"}),(0,a.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-900",children:"Image"}),(0,a.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-900",children:"Health"}),(0,a.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-900",children:"Uptime"}),(0,a.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-900",children:"Restarts"}),(0,a.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-900",children:"CPU"}),(0,a.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-900",children:"Memory"}),(0,a.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-900",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:(0,a.jsx)(P.M,{children:null===(Z=z.containers)||void 0===Z?void 0:Z.map(e=>{var s,t,l,r;let n=null===(s=z.containerMetrics)||void 0===s?void 0:s.find(s=>s.containerId===e.containerId);return(0,a.jsxs)(U.E.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:K(e.state)}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.containerName}),(0,a.jsx)("div",{className:"text-sm text-gray-500 font-mono",children:null===(t=e.containerId)||void 0===t?void 0:t.substring(0,12)})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.image}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)(d.C,{className:G(e.healthStatus),children:e.healthStatus||"none"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:J(e.uptime)}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"text-sm ".concat(e.restartCount>5?"text-red-600":"text-gray-900"),children:e.restartCount||0})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:n?"".concat(null===(l=n.cpuPercent)||void 0===l?void 0:l.toFixed(1),"%"):"N/A"}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:n?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[null===(r=n.memoryPercent)||void 0===r?void 0:r.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:Y(1048576*(n.memoryUsageMB||0))})]}):"N/A"}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)(o.z,{onClick:()=>W(e.containerId),variant:"ghost",size:"sm",children:(0,a.jsx)(ei.Z,{size:16})})})]},e.containerId)})})})]})})]}),(0,a.jsx)(P.M,{children:B&&q[B]&&(0,a.jsx)(U.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>I(null),children:(0,a.jsxs)(U.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg max-w-4xl w-full max-h-[80vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium",children:["Container Logs: ",B.substring(0,12)]}),(0,a.jsx)(o.z,{onClick:()=>I(null),variant:"ghost",size:"sm",children:"✕"})]}),(0,a.jsx)("div",{className:"p-4 bg-gray-900 text-green-400 font-mono text-sm overflow-y-auto max-h-96",children:q[B].map((e,s)=>(0,a.jsx)("div",{className:"whitespace-pre-wrap break-words mb-1",children:e},s))})]})})})]}):(0,a.jsx)("div",{className:"flex items-center justify-center p-8 ".concat(M),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(es.Z,{className:"animate-spin mx-auto mb-4 text-blue-500",size:40}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading real-time monitoring data..."}),(0,a.jsx)("div",{className:"flex items-center justify-center mt-2 space-x-2 text-sm",children:S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ea.Z,{size:16,className:"text-green-500"}),(0,a.jsx)("span",{className:"text-green-600",children:"Connected"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(el.Z,{size:16,className:"text-red-500"}),(0,a.jsx)("span",{className:"text-red-600",children:"Disconnected"})]})})]})})}var ed=t(85273),eo=t(3274),em=t(59337);function ex(){let[e,s]=(0,l.useState)(null),[t,d]=(0,l.useState)("24h"),[m]=(0,l.useState)([{id:"1",name:"High CPU Usage",metricType:em.QD.CPU,thresholdValue:80,comparisonOperator:em.v1.GREATER_THAN,priority:em.gi.HIGH,channels:[{type:"email",config:{},enabled:!0}],enabled:!0,createdAt:new Date}]),{containers:u,summary:h,isLoading:j,refetch:p,restartContainer:f,stopContainer:g}=(0,r.be)(),{metrics:y,isLoading:v,refetch:N}=(0,n.k7)(),{history:b,templates:C,isLoadingHistory:M,configureAlert:S,deleteAlert:z,testAlert:E}=(0,i.Z7)(),{statistics:D}=(0,i.iU)(24),P=e=>{window.location.href="/monitoring/logs/".concat(e)},U=e=>{window.location.href="/monitoring/metrics/".concat(e)},L={cpu:Array.from({length:24},(e,s)=>({time:"".concat(s,":00"),value:100*Math.random(),label:"".concat(Math.floor(100*Math.random()),"%")})),memory:Array.from({length:24},(e,s)=>({time:"".concat(s,":00"),value:100*Math.random(),label:"".concat(Math.floor(1024*Math.random())," MB")}))};return(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-6 h-6"}),"System Monitoring"]}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Monitor your containers and system resources in real-time"})]}),(0,a.jsxs)(o.z,{onClick:()=>{p(),N()},variant:"outline",children:[(0,a.jsx)(es.Z,{className:"w-4 h-4 mr-2"}),"Refresh All"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(c.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Total Containers"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:(null==h?void 0:h.total)||0})]}),(0,a.jsx)(en.Z,{className:"w-8 h-8 text-gray-400"})]})}),(0,a.jsx)(c.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Running"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:(null==h?void 0:h.running)||0})]}),(0,a.jsx)(T.Z,{className:"w-8 h-8 text-green-500"})]})}),(0,a.jsx)(c.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Stopped"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:(null==h?void 0:h.stopped)||0})]}),(0,a.jsx)(A.Z,{className:"w-8 h-8 text-red-500"})]})}),(0,a.jsx)(c.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Alerts (24h)"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:D.total})]}),(0,a.jsx)(V.Z,{className:"w-8 h-8 text-yellow-500"})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"System Resources"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(k,{metrics:y,type:"cpu",thresholds:{warning:70,critical:85}}),(0,a.jsx)(k,{metrics:y,type:"memory",thresholds:{warning:75,critical:90}}),(0,a.jsx)(k,{metrics:y,type:"disk",thresholds:{warning:80,critical:95}})]})]}),(0,a.jsxs)(ed.mQ,{defaultValue:"realtime",className:"space-y-4",children:[(0,a.jsxs)(ed.dr,{className:"grid w-full grid-cols-5",children:[(0,a.jsx)(ed.SP,{value:"realtime",children:"Real-Time"}),(0,a.jsx)(ed.SP,{value:"containers",children:"Containers"}),(0,a.jsx)(ed.SP,{value:"metrics",children:"Metrics"}),(0,a.jsx)(ed.SP,{value:"alerts",children:"Alerts"}),(0,a.jsx)(ed.SP,{value:"history",children:"History"})]}),(0,a.jsx)(ed.nU,{value:"realtime",className:"space-y-4",children:(0,a.jsx)(ec,{})}),(0,a.jsxs)(ed.nU,{value:"containers",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Container Health"}),j&&(0,a.jsx)(eo.Z,{className:"w-5 h-5 animate-spin text-gray-500"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.map(e=>(0,a.jsx)(w,{container:e,onRestart:f,onStop:g,onViewLogs:P,onViewDetails:U},e.id)),0===u.length&&!j&&(0,a.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,a.jsx)(en.Z,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No containers found"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Start some containers to see them here"})]})]})]}),(0,a.jsx)(ed.nU,{value:"metrics",children:(0,a.jsx)(Z.R,{data:L,timeRange:t,onRangeChange:d,height:400})}),(0,a.jsx)(ed.nU,{value:"alerts",className:"space-y-4",children:(0,a.jsx)(X,{onAlertConfigured:S,onAlertDeleted:z,onAlertTested:e=>{e.channels&&e.channels.length>0&&E({channel:e.channels[0].type,config:e.channels[0].config})}})}),(0,a.jsx)(ed.nU,{value:"history",children:(0,a.jsx)(R,{history:b,loading:M})})]})]})}},99156:function(e,s,t){"use strict";t.d(s,{I:function(){return n}});var a=t(57437),l=t(2265),r=t(37440);let n=l.forwardRef((e,s)=>{let{className:t,type:l,...n}=e;return(0,a.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});n.displayName="Input"},19573:function(e,s,t){"use strict";t.d(s,{J2:function(){return i},xo:function(){return c},yk:function(){return d}});var a=t(57437),l=t(2265),r=t(61485),n=t(37440);let i=r.fC,c=r.xz,d=l.forwardRef((e,s)=>{let{className:t,align:l="center",sideOffset:i=4,...c}=e;return(0,a.jsx)(r.h_,{children:(0,a.jsx)(r.VY,{ref:s,align:l,sideOffset:i,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...c})})});d.displayName=r.VY.displayName},70571:function(e,s,t){"use strict";t.d(s,{E:function(){return i}});var a=t(57437),l=t(2265),r=t(52431),n=t(37440);let i=l.forwardRef((e,s)=>{let{className:t,value:l,...i}=e;return(0,a.jsx)(r.fC,{ref:s,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...i,children:(0,a.jsx)(r.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});i.displayName=r.fC.displayName},26975:function(e,s,t){"use strict";t.d(s,{RM:function(){return c},SC:function(){return d},iA:function(){return n},pj:function(){return m},ss:function(){return o},xD:function(){return i}});var a=t(57437),l=t(2265),r=t(37440);let n=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,r.cn)("w-full caption-bottom text-sm",t),...l})})});n.displayName="Table";let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("thead",{ref:s,className:(0,r.cn)("[&_tr]:border-b",t),...l})});i.displayName="TableHeader";let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,r.cn)("[&_tr:last-child]:border-0",t),...l})});c.displayName="TableBody",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...l})}).displayName="TableFooter";let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("tr",{ref:s,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...l})});d.displayName="TableRow";let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("th",{ref:s,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...l})});o.displayName="TableHead";let m=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("td",{ref:s,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...l})});m.displayName="TableCell",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("caption",{ref:s,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",t),...l})}).displayName="TableCaption"},74979:function(e,s,t){"use strict";t.d(s,{Z7:function(){return c},iU:function(){return d}});var a=t(93191),l=t(53567),r=t(73999),n=t(2265),i=t(14438);function c(){let e=(0,a.NL)(),[s,t]=(0,n.useState)(null),c=(0,l.a)({queryKey:["alertHistory"],queryFn:()=>i.CV.getAlertHistory(),refetchInterval:6e4,staleTime:3e4}),d=(0,l.a)({queryKey:["alertTemplates"],queryFn:()=>i.CV.getAlertTemplates(),staleTime:3e5}),o=(0,r.D)({mutationFn:e=>i.CV.configureAlert(e),onSuccess:()=>{e.invalidateQueries({queryKey:["alerts"]}),e.invalidateQueries({queryKey:["alertHistory"]})}}),m=(0,r.D)({mutationFn:e=>{let{id:s,config:t}=e;return i.CV.updateAlert(s,t)},onSuccess:()=>{e.invalidateQueries({queryKey:["alerts"]})}}),x=(0,r.D)({mutationFn:e=>i.CV.deleteAlert(e),onSuccess:()=>{e.invalidateQueries({queryKey:["alerts"]}),e.invalidateQueries({queryKey:["alertHistory"]})}}),u=(0,r.D)({mutationFn:e=>{let{channel:s,config:t}=e;return i.CV.testAlert(s,t)}});return{history:c.data||[],templates:d.data||[],selectedAlert:s,selectAlert:t,isLoadingHistory:c.isLoading,isLoadingTemplates:d.isLoading,isConfiguring:o.isPending,isUpdating:m.isPending,isDeleting:x.isPending,isTesting:u.isPending,historyError:c.error,templatesError:d.error,configureError:o.error,updateError:m.error,deleteError:x.error,testError:u.error,configureAlert:o.mutate,updateAlert:m.mutate,deleteAlert:x.mutate,testAlert:u.mutate,testResult:u.data,refetchHistory:c.refetch,refetchTemplates:d.refetch}}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24,{history:s,isLoadingHistory:t}=c(),a={total:0,sent:0,failed:0,suppressed:0,byPriority:{critical:0,high:0,medium:0,low:0},recentAlerts:[]};if(s&&s.length>0){let t=new Date;t.setHours(t.getHours()-e);let l=s.filter(e=>new Date(e.triggeredAt)>t);a.total=l.length,a.sent=l.filter(e=>"sent"===e.status).length,a.failed=l.filter(e=>"failed"===e.status).length,a.suppressed=l.filter(e=>"suppressed"===e.status).length,a.recentAlerts=l.slice(0,10)}return{statistics:a,isLoading:t}}},59337:function(e,s,t){"use strict";var a,l,r,n,i,c;t.d(s,{QD:function(){return a},gi:function(){return l},v1:function(){return r}}),(n=a||(a={})).CPU="cpu",n.MEMORY="memory",n.DISK="disk",n.NETWORK="network",n.CONTAINER_STATUS="container_status",n.HEALTH_CHECK="health_check",n.RESTART_COUNT="restart_count",(i=l||(l={})).LOW="low",i.MEDIUM="medium",i.HIGH="high",i.CRITICAL="critical",(c=r||(r={})).GREATER_THAN=">",c.LESS_THAN="<",c.EQUAL="=",c.NOT_EQUAL="!=",c.GREATER_THAN_OR_EQUAL=">=",c.LESS_THAN_OR_EQUAL="<="}},function(e){e.O(0,[502,685,842,689,513,139,673,716,313,971,23,744],function(){return e(e.s=71269)}),_N_E=e.O()}]);