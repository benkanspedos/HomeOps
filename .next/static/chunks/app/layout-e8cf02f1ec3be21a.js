(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{49035:function(e,t,s){Promise.resolve().then(s.bind(s,15992)),Promise.resolve().then(s.t.bind(s,60936,23)),Promise.resolve().then(s.t.bind(s,58877,23)),Promise.resolve().then(s.bind(s,88726))},15992:function(e,t,s){"use strict";s.d(t,{Providers:function(){return h}});var r=s(57437),a=s(2265),i=s(16463),n=s(64392),l=s(88726);let c=(0,a.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,a.useState)(null),[u,d]=(0,a.useState)(!0),h=(0,i.useRouter)(),f=(0,n.createClientComponentClient)();(0,a.useEffect)(()=>{m();let{data:e}=f.auth.onAuthStateChange(async(e,t)=>{(null==t?void 0:t.user)?await m():o(null)});return()=>{e.subscription.unsubscribe()}},[]);let m=async()=>{try{let{data:{user:e}}=await f.auth.getUser();if(e){let{data:t}=await f.from("users").select("*").eq("id",e.id).single();o(t||{id:e.id,email:e.email})}else o(null)}catch(e){console.error("Error checking user:",e)}finally{d(!1)}},g=async(e,t)=>{try{let{error:s}=await f.auth.signInWithPassword({email:e,password:t});if(s)throw s;await m(),l.ZP.success("Successfully signed in!"),h.push("/dashboard")}catch(e){throw l.ZP.error(e.message||"Failed to sign in"),e}},w=async(e,t,s)=>{try{let{error:r}=await f.auth.signUp({email:e,password:t,options:{data:{full_name:s}}});if(r)throw r;l.ZP.success("Account created! Please check your email to verify."),h.push("/login")}catch(e){throw l.ZP.error(e.message||"Failed to create account"),e}},y=async()=>{try{let{error:e}=await f.auth.signOut();if(e)throw e;o(null),l.ZP.success("Signed out successfully"),h.push("/")}catch(e){throw l.ZP.error(e.message||"Failed to sign out"),e}},P=async e=>{if(s)try{let{error:t}=await f.from("users").update(e).eq("id",s.id);if(t)throw t;o({...s,...e}),l.ZP.success("Profile updated successfully")}catch(e){throw l.ZP.error(e.message||"Failed to update profile"),e}};return(0,r.jsx)(c.Provider,{value:{user:s,loading:u,signIn:g,signUp:w,signOut:y,updateProfile:P},children:t})}let u=(0,a.createContext)(void 0);function d(e){let{children:t}=e,[s,i]=(0,a.useState)("system");return(0,a.useEffect)(()=>{let e=localStorage.getItem("theme");e&&i(e)},[]),(0,a.useEffect)(()=>{let e=document.documentElement;if("system"===s){let t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e.classList.toggle("dark","dark"===t)}else e.classList.toggle("dark","dark"===s);localStorage.setItem("theme",s)},[s]),(0,r.jsx)(u.Provider,{value:{theme:s,setTheme:i},children:t})}function h(e){let{children:t}=e;return(0,r.jsx)(d,{children:(0,r.jsx)(o,{children:t})})}},58877:function(){}},function(e){e.O(0,[290,404,4,135,971,23,744],function(){return e(e.s=49035)}),_N_E=e.O()}]);