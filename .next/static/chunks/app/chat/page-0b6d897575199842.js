(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{76420:function(e,s,t){Promise.resolve().then(t.bind(t,82179))},82179:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return B}});var r=t(57437),n=t(2265),a=t(17583),c=t(59333),i=t(45764),o=t(99687),l=t(24258),d=t(85273),m=t(57883),u=t(64308),x=t(94693),f=t(47412),g=t(68954),h=t(92940),p=t(71935),y=t(52022),v=t(3274),j=t(76780),N=t(60994),b=t(99156),w=t(80023),C=t(37440);let S=n.forwardRef((e,s)=>{let{className:t,children:n,...a}=e;return(0,r.jsxs)(w.fC,{ref:s,className:(0,C.cn)("relative overflow-hidden",t),...a,children:[(0,r.jsx)(w.l_,{className:"h-full w-full rounded-[inherit]",children:n}),(0,r.jsx)(k,{}),(0,r.jsx)(w.Ns,{})]})});S.displayName=w.fC.displayName;let k=n.forwardRef((e,s)=>{let{className:t,orientation:n="vertical",...a}=e;return(0,r.jsx)(w.gb,{ref:s,orientation:n,className:(0,C.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...a,children:(0,r.jsx)(w.q4,{className:"relative flex-1 rounded-full bg-border"})})});k.displayName=w.gb.displayName;var R=t(81464);let A=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(R.fC,{ref:s,className:(0,C.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...n})});A.displayName=R.fC.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(R.Ee,{ref:s,className:(0,C.cn)("aspect-square h-full w-full",t),...n})}).displayName=R.Ee.displayName;let D=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(R.NY,{ref:s,className:(0,C.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...n})});D.displayName=R.NY.displayName;var Z=t(76235),E=t(21513),V=t(34446);function _(e){let{messages:s,onSendMessage:t,pendingCommand:a,onConfirmCommand:c,isConnected:i,isProcessing:o=!1,suggestions:l=[],onSuggestionClick:d}=e,[w,C]=(0,n.useState)(""),[k,R]=(0,n.useState)(!1),_=(0,n.useRef)(null),I=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;null===(e=_.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[s]),(0,n.useEffect)(()=>{var e;null===(e=I.current)||void 0===e||e.focus()},[]);let M=()=>{w.trim()&&i&&!o&&(t(w.trim()),C(""),R(!1))},z=e=>{var s;C(e),R(!1),null===(s=I.current)||void 0===s||s.focus(),d&&d(e)};return(0,r.jsxs)(m.Zb,{className:"flex flex-col h-full",children:[(0,r.jsx)("div",{className:"p-3 border-b",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-2 w-2 rounded-full ".concat(i?"bg-green-500":"bg-red-500"," animate-pulse")}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:i?"Connected":"Disconnected"})]}),o&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,r.jsx)(v.Z,{className:"h-4 w-4 animate-spin"}),"Processing..."]})]})}),(0,r.jsx)(S,{className:"flex-1 p-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(V.M,{children:0===s.length?(0,r.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,r.jsx)(g.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,r.jsx)("p",{className:"text-sm",children:"Start a conversation by typing a message or command"}),(0,r.jsx)("p",{className:"text-xs mt-2",children:'Try "Show system health" or "List running containers"'})]}):s.map(e=>{let s="user"===e.role,t="system"===e.role;return(0,r.jsxs)(E.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex gap-3 ".concat(s?"justify-end":"justify-start"),children:[!s&&(0,r.jsx)(A,{className:"h-8 w-8",children:(0,r.jsx)(D,{className:t?"bg-yellow-100":"bg-blue-100",children:t?"S":(0,r.jsx)(g.Z,{className:"h-4 w-4"})})}),(0,r.jsx)("div",{className:"max-w-[70%] ".concat(s?"order-first":""),children:(0,r.jsx)(m.Zb,{className:"p-3 ".concat(s?"bg-blue-500 text-white":t?"bg-yellow-50 border-yellow-200":"bg-gray-50"),children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),e.commandExecuted&&(0,r.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(x.C,{variant:"outline",className:"text-xs",children:[e.commandExecuted.action," ",e.commandExecuted.target]}),(0,r.jsxs)("span",{className:"text-xs opacity-70",children:[Math.round(100*e.commandExecuted.confidence),"% confidence"]})]})}),e.executionResult&&(0,r.jsx)("div",{className:"pt-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs ".concat(e.executionResult.success?"text-green-600":"text-red-600"),children:[e.executionResult.success?(0,r.jsx)(h.Z,{className:"h-3 w-3"}):(0,r.jsx)(p.Z,{className:"h-3 w-3"}),(0,r.jsx)("span",{children:e.executionResult.message})]})}),(0,r.jsx)("div",{className:"text-xs opacity-50 mt-1",children:(0,Z.WU)(new Date(e.timestamp),"HH:mm:ss")})]})})}),s&&(0,r.jsx)(A,{className:"h-8 w-8",children:(0,r.jsx)(D,{className:"bg-blue-100",children:(0,r.jsx)(y.Z,{className:"h-4 w-4"})})})]},e.id)})}),(0,r.jsx)("div",{ref:_})]})}),a&&c&&(0,r.jsxs)(f.bZ,{className:"mx-4 mb-4 border-yellow-200 bg-yellow-50",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4"}),(0,r.jsx)(f.X,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"font-medium",children:"Command requires confirmation:"}),(0,r.jsx)("p",{className:"text-sm",children:a.description}),(0,r.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,r.jsx)(u.z,{size:"sm",onClick:()=>c(a,!0),className:"bg-green-600 hover:bg-green-700",children:"Confirm"}),(0,r.jsx)(u.z,{size:"sm",variant:"outline",onClick:()=>c(a,!1),children:"Cancel"})]})]})})]}),k&&l.length>0&&(0,r.jsx)("div",{className:"px-4 pb-2",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:l.slice(0,5).map((e,s)=>(0,r.jsx)(x.C,{variant:"outline",className:"cursor-pointer hover:bg-gray-100",onClick:()=>z(e),children:e},s))})}),(0,r.jsxs)("div",{className:"p-4 border-t",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(b.I,{ref:I,value:w,onChange:e=>{C(e.target.value),R(e.target.value.length>0&&l.length>0)},onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),M())},placeholder:i?"Type a message or command...":"Connecting...",disabled:!i||o,className:"flex-1"}),(0,r.jsx)(u.z,{onClick:M,disabled:!w.trim()||!i||o,size:"icon",children:o?(0,r.jsx)(v.Z,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(N.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Quick commands:"}),["System status","List containers","Show alerts","DNS status"].map(e=>(0,r.jsx)(x.C,{variant:"outline",className:"text-xs cursor-pointer hover:bg-gray-100",onClick:()=>{var s;C(e),null===(s=I.current)||void 0===s||s.focus()},children:e},e))]})]})]})}var I=t(53977),M=t(38733),z=t(70571);function L(e){let{onVoiceData:s,voiceStatus:t,isConnected:a,isProcessing:i=!1}=e,[o,l]=(0,n.useState)(!1),[d,x]=(0,n.useState)(0),[g,h]=(0,n.useState)(0),[p,y]=(0,n.useState)(null),[v,N]=(0,n.useState)(!0),b=(0,n.useRef)(null),w=(0,n.useRef)([]),C=(0,n.useRef)(null),S=(0,n.useRef)(null),k=(0,n.useRef)(null),R=(0,n.useRef)(null),A=(0,n.useRef)(null);(0,n.useEffect)(()=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||(N(!1),y("Your browser does not support audio recording"))},[]),(0,n.useEffect)(()=>()=>{o&&_(),C.current&&C.current.close(),k.current&&cancelAnimationFrame(k.current),R.current&&clearInterval(R.current)},[o]);let D=(0,n.useCallback)(()=>{if(!S.current)return;let e=new Uint8Array(S.current.frequencyBinCount);S.current.getByteFrequencyData(e),x(Math.min(100,e.reduce((e,s)=>e+s,0)/e.length/128*100)),o&&(k.current=requestAnimationFrame(D))},[o]),Z=async()=>{try{y(null);let e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:16e3}});A.current=e,C.current=new(window.AudioContext||window.webkitAudioContext);let t=C.current.createMediaStreamSource(e);S.current=C.current.createAnalyser(),S.current.fftSize=256,t.connect(S.current);let r=MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/ogg";b.current=new MediaRecorder(e,{mimeType:r,audioBitsPerSecond:128e3}),w.current=[],b.current.ondataavailable=e=>{e.data.size>0&&w.current.push(e.data)},b.current.onstop=async()=>{let e=new Blob(w.current,{type:r}),t=await e.arrayBuffer();s(t),A.current&&(A.current.getTracks().forEach(e=>e.stop()),A.current=null)},b.current.start(100),l(!0),h(0),D(),R.current=setInterval(()=>{h(e=>e>=60?(_(),e):e+1)},1e3)}catch(e){console.error("Failed to start recording:",e),y(e.message||"Failed to access microphone"),l(!1)}},_=()=>{b.current&&"inactive"!==b.current.state&&b.current.stop(),R.current&&(clearInterval(R.current),R.current=null),k.current&&(cancelAnimationFrame(k.current),k.current=null),A.current&&(A.current.getTracks().forEach(e=>e.stop()),A.current=null),l(!1),x(0),h(0)};return v?(0,r.jsx)(m.Zb,{className:"p-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsx)(E.E.div,{animate:o?{scale:[1,1.1,1]}:{},transition:{duration:1,repeat:o?1/0:0},children:(0,r.jsx)(u.z,{onClick:()=>{o?_():Z()},disabled:!a||i,size:"lg",className:"rounded-full h-20 w-20 ".concat(o?"bg-red-500 hover:bg-red-600":"bg-blue-500 hover:bg-blue-600"),children:o?(0,r.jsx)(I.Z,{className:"h-8 w-8 text-white"}):(0,r.jsx)(c.Z,{className:"h-8 w-8 text-white"})})}),(0,r.jsx)("div",{className:"text-center",children:o?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-red-500",children:"Recording..."}),(0,r.jsx)("p",{className:"text-2xl font-mono",children:"".concat(Math.floor(g/60),":").concat((g%60).toString().padStart(2,"0"))}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Max: 60 seconds"})]}):(0,r.jsx)("p",{className:"text-sm text-gray-600",children:a?"Click to start recording":"Connecting..."})})]}),o&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(M.Z,{className:"h-4 w-4 text-gray-500"}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(z.E,{value:d,className:"h-2"})})]}),(0,r.jsx)("p",{className:"text-xs text-center text-gray-500",children:"Audio Level"})]}),t&&(0,r.jsx)(V.M,{children:(0,r.jsxs)(E.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("div",{className:"h-2 w-2 rounded-full ".concat((()=>{if(!t)return"bg-gray-500";switch(t.status){case"listening":return"bg-blue-500";case"processing":case"transcribing":return"bg-yellow-500";case"executing":return"bg-orange-500";case"completed":return"bg-green-500";case"error":return"bg-red-500";default:return"bg-gray-500"}})()," animate-pulse")}),(0,r.jsx)("span",{className:"text-sm font-medium",children:(()=>{if(!t)return null;switch(t.status){case"listening":return"Listening...";case"processing":return t.message||"Processing audio...";case"transcribing":return"Converting speech to text...";case"executing":return t.message||"Executing command...";case"completed":return"Completed successfully";case"error":return t.message||"An error occurred";default:return null}})()})]}),void 0!==t.progress&&(0,r.jsx)(z.E,{value:t.progress,className:"h-1"}),"error"===t.status&&(0,r.jsxs)(f.bZ,{className:"border-red-200 bg-red-50",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4"}),(0,r.jsx)(f.X,{children:t.message})]})]})}),p&&!t&&(0,r.jsxs)(f.bZ,{className:"border-red-200 bg-red-50",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4"}),(0,r.jsx)(f.X,{children:p})]}),(0,r.jsxs)("div",{className:"pt-4 border-t",children:[(0,r.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Voice Commands:"}),(0,r.jsxs)("ul",{className:"text-xs text-gray-600 space-y-1",children:[(0,r.jsx)("li",{children:'• "Show system health" - Display system status'}),(0,r.jsx)("li",{children:'• "List containers" - Show all Docker containers'}),(0,r.jsx)("li",{children:'• "Restart [container]" - Restart a specific container'}),(0,r.jsx)("li",{children:'• "Check DNS status" - View DNS performance'}),(0,r.jsx)("li",{children:'• "Show recent alerts" - Display system alerts'})]})]})]})}):(0,r.jsxs)(f.bZ,{className:"border-red-200 bg-red-50",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4"}),(0,r.jsx)(f.X,{children:"Voice input is not supported in your browser. Please use a modern browser like Chrome, Firefox, or Edge."})]})}var U=t(45040),q=t(27776),T=t(20357);let F=[{command:"list containers",description:"Show all Docker containers",category:"container"},{command:"show running containers",description:"Display only running containers",category:"container"},{command:"restart {container}",description:"Restart a specific container",category:"container",parameters:["container"]},{command:"stop {container}",description:"Stop a running container",category:"container",parameters:["container"]},{command:"start {container}",description:"Start a stopped container",category:"container",parameters:["container"]},{command:"show container logs {container}",description:"View container logs",category:"container",parameters:["container"]},{command:"container status",description:"Check status of all containers",category:"container"},{command:"system health",description:"Display overall system health",category:"health"},{command:"show system status",description:"View detailed system status",category:"health"},{command:"check health",description:"Run health checks",category:"health"},{command:"system metrics",description:"Display system metrics",category:"health"},{command:"cpu usage",description:"Show CPU utilization",category:"health"},{command:"memory usage",description:"Display memory statistics",category:"health"},{command:"disk usage",description:"Show disk space information",category:"health"},{command:"dns status",description:"Check DNS service status",category:"dns"},{command:"show dns queries",description:"Display recent DNS queries",category:"dns"},{command:"top blocked domains",description:"Show most blocked domains",category:"dns"},{command:"add domain {domain}",description:"Add domain to blocklist",category:"dns",parameters:["domain"]},{command:"remove domain {domain}",description:"Remove domain from blocklist",category:"dns",parameters:["domain"]},{command:"dns performance",description:"View DNS performance metrics",category:"dns"},{command:"flush dns cache",description:"Clear DNS cache",category:"dns"},{command:"show logs",description:"Display system logs",category:"system"},{command:"recent logs",description:"Show recent log entries",category:"system"},{command:"system uptime",description:"Display system uptime",category:"system"},{command:"network status",description:"Check network connectivity",category:"system"},{command:"backup status",description:"View backup status",category:"system"},{command:"system resources",description:"Display resource usage",category:"system"},{command:"show alerts",description:"Display active alerts",category:"alert"},{command:"recent alerts",description:"View recent alert history",category:"alert"},{command:"clear alerts",description:"Clear resolved alerts",category:"alert"},{command:"alert settings",description:"View alert configuration",category:"alert"},{command:"test alert",description:"Send test alert",category:"alert"}],P=["pihole","nginx","redis","timescaledb","postgres","homeassistant","portainer","grafana","prometheus"];function B(){let[e]=(0,n.useState)(()=>localStorage.getItem("homeops_user_id")||"user_".concat(Math.random().toString(36).substr(2,9))),[s]=(0,n.useState)(()=>"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))),[t,g]=(0,n.useState)("chat"),[h,p]=(0,n.useState)(""),{connected:y,messages:v,voiceStatus:j,pendingCommand:N,sendMessage:b,sendVoiceData:w,confirmCommand:C,stats:S}=function(e){let{userId:s,sessionId:t,autoConnect:r=!0,serverUrl:a=T.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3101"}=e,[c,i]=(0,n.useState)(null),[o,l]=(0,n.useState)(!1),[d,m]=(0,n.useState)([]),[u,x]=(0,n.useState)(null),[f,g]=(0,n.useState)(null),[h,p]=(0,n.useState)(null),y=(0,n.useRef)(null),v=(0,n.useRef)(),j=(0,n.useRef)(0),N=(0,n.useCallback)(()=>{var e;if(null===(e=y.current)||void 0===e?void 0:e.connected)return;let r=(0,U.io)(a,{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4});y.current=r,r.on("connect",()=>{console.log("WebSocket connected:",r.id),l(!0),j.current=0,r.emit("chat:authenticate",{userId:s,sessionId:t})}),r.on("disconnect",e=>{console.log("WebSocket disconnected:",e),l(!1),("io server disconnect"===e||"transport close"===e)&&(v.current=setTimeout(()=>{j.current<5&&(j.current++,N())},2e3*j.current))}),r.on("connect_error",e=>{console.error("WebSocket connection error:",e),q.Am.error("Connection failed. Retrying...")}),r.on("chat:authenticated",e=>{console.log("Authenticated:",e),q.Am.success("Connected to chat service"),r.emit("chat:get-history",{sessionId:t,limit:50})}),r.on("chat:message-received",e=>{m(s=>[...s,e])}),r.on("chat:message",e=>{m(s=>[...s,e]),e.executionResult&&(e.executionResult.success?q.Am.success(e.executionResult.message):q.Am.error(e.executionResult.message))}),r.on("chat:history",e=>{m(e.messages)}),r.on("chat:error",e=>{console.error("Chat error:",e),q.Am.error(e.error)}),r.on("chat:command-confirmation-required",e=>{g(e.intent),q.Am.info("Command requires confirmation: ".concat(e.intent.description))}),r.on("command:result",e=>{e.result.success?q.Am.success("Command executed: ".concat(e.result.message)):q.Am.error("Command failed: ".concat(e.result.message)),g(null)}),r.on("command:confirmed-result",e=>{e.result.success?q.Am.success("Command executed: ".concat(e.result.message)):q.Am.error("Command failed: ".concat(e.result.message)),g(null)}),r.on("command:cancelled",()=>{q.Am.info("Command cancelled"),g(null)}),r.on("command:error",e=>{console.error("Command error:",e),q.Am.error(e.error),g(null)}),r.on("voice:status",e=>{x(e),"error"===e.status&&q.Am.error(e.message||"Voice processing error")}),r.on("voice:transcription",e=>{let r={id:e.messageId,content:e.transcription,role:"user",timestamp:new Date().toISOString(),sessionId:t,userId:s,commandExecuted:e.intent};m(e=>[...e,r])}),r.on("voice:command-confirmation-required",e=>{g(e.intent),q.Am.info("Voice command requires confirmation: ".concat(e.intent.description))}),r.on("voice:error",e=>{console.error("Voice error:",e),q.Am.error(e.error),x(null)}),r.on("system:command-executed",e=>{e.userId!==s&&q.Am.info("System: ".concat(e.intent.description," executed by ").concat(e.userId))}),r.on("system:shutdown",e=>{q.Am.warning(e.message),b()}),i(r)},[a,s,t]),b=(0,n.useCallback)(()=>{v.current&&clearTimeout(v.current),y.current&&(y.current.disconnect(),y.current=null,i(null),l(!1))},[]),w=(0,n.useCallback)(e=>{var s;if(!(null===(s=y.current)||void 0===s?void 0:s.connected)){q.Am.error("Not connected to chat service");return}y.current.emit("chat:send-message",{message:e,sessionId:t})},[t]),C=(0,n.useCallback)(e=>{var s;if(!(null===(s=y.current)||void 0===s?void 0:s.connected)){q.Am.error("Not connected to chat service");return}y.current.emit("voice:start-processing",{audioData:e,sessionId:t})},[t]),S=(0,n.useCallback)(e=>{var s;if(!(null===(s=y.current)||void 0===s?void 0:s.connected)){q.Am.error("Not connected to chat service");return}y.current.emit("command:execute",{intent:e,sessionId:t})},[t]),k=(0,n.useCallback)((e,s)=>{var r;if(!(null===(r=y.current)||void 0===r?void 0:r.connected)){q.Am.error("Not connected to chat service");return}y.current.emit("command:confirm",{intent:e,sessionId:t,confirmed:s})},[t]),R=(0,n.useCallback)(e=>{var s;if(!(null===(s=y.current)||void 0===s?void 0:s.connected)){q.Am.error("Not connected to chat service");return}y.current.emit("chat:get-history",{sessionId:t,limit:e})},[t]),A=(0,n.useCallback)(()=>{m([])},[]);return(0,n.useEffect)(()=>(r&&N(),()=>{b()}),[r,N,b]),(0,n.useEffect)(()=>{if(!o||!y.current)return;let e=()=>{p({activeSessions:1,totalMessages:d.length,connectedUsers:1})};e();let s=setInterval(e,3e4);return()=>clearInterval(s)},[o,d.length]),{socket:c,connected:o,messages:d,voiceStatus:u,pendingCommand:f,sendMessage:w,sendVoiceData:C,executeCommand:S,confirmCommand:k,getHistory:R,clearMessages:A,connect:N,disconnect:b,stats:h}}({userId:e,sessionId:s,autoConnect:!0}),{suggestions:k,quickCommands:R,addToHistory:A,getSuggestionsByCategory:D,allCommands:Z}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",[s,t]=(0,n.useState)([]),[r,a]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=localStorage.getItem("homeops_recent_commands");if(e)try{a(JSON.parse(e))}catch(e){console.error("Failed to load recent commands:",e)}},[]),(0,n.useEffect)(()=>{if(!e||e.length<2){t([]);return}let s=e.toLowerCase().trim(),n=s.split(" ");t(F.map(e=>{let t=0;e.command.toLowerCase().split(" "),e.command.toLowerCase().startsWith(s)&&(t+=100),n.forEach(s=>{e.command.toLowerCase().includes(s)&&(t+=50),e.description.toLowerCase().includes(s)&&(t+=20)});let a=s.replace(/\s/g,"");return e.command.toLowerCase().replace(/\s/g,"").includes(a)&&(t+=30),r.includes(e.command)&&(t+=40),{...e,confidence:t/100}}).filter(e=>e.confidence&&e.confidence>.2).sort((e,s)=>(s.confidence||0)-(e.confidence||0)).slice(0,10))},[e,r]);let c=(0,n.useMemo)(()=>[...new Set([...r.slice(0,3),"system health","list containers","show alerts","dns status","system metrics"])].slice(0,5),[r]);return{suggestions:s,recentCommands:r,quickCommands:c,addToHistory:e=>{let s=[e,...r.filter(s=>s!==e)].slice(0,10);a(s),localStorage.setItem("homeops_recent_commands",JSON.stringify(s))},getParameterSuggestions:e=>e.includes("{container}")?P.map(s=>e.replace("{container}",s)):e.includes("{domain}")?[e.replace("{domain}","example.com"),e.replace("{domain}","ads.google.com"),e.replace("{domain}","tracking.site.com")]:[e],getSuggestionsByCategory:e=>F.filter(s=>s.category===e),searchCommands:e=>{if(!e)return[];let s=e.toLowerCase();return F.filter(e=>"".concat(e.command," ").concat(e.description).toLowerCase().includes(s))},getCommandHelp:e=>F.find(s=>s.command.toLowerCase()===e.toLowerCase()),allCommands:F}}(h);(0,n.useEffect)(()=>{localStorage.setItem("homeops_user_id",e)},[e]);let E=e=>{b(e),A(e),p("")},V=(e,s)=>{C(e,s)},I=e=>{p(e)};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)(q.x7,{position:"top-right"}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(a.Z,{className:"h-6 w-6 text-blue-500"}),(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Natural Language Interface"}),(0,r.jsx)(x.C,{variant:y?"default":"destructive",children:y?"Connected":"Disconnected"})]}),S&&(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,r.jsxs)("span",{children:["Active Sessions: ",S.activeSessions]}),(0,r.jsxs)("span",{children:["Messages: ",S.totalMessages]}),(0,r.jsxs)("span",{children:["Users: ",S.connectedUsers]})]})]})})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-3",children:(0,r.jsxs)(d.mQ,{value:t,onValueChange:g,children:[(0,r.jsxs)(d.dr,{className:"grid w-full grid-cols-2",children:[(0,r.jsxs)(d.SP,{value:"chat",className:"flex items-center gap-2",children:[(0,r.jsx)(a.Z,{className:"h-4 w-4"}),"Chat"]}),(0,r.jsxs)(d.SP,{value:"voice",className:"flex items-center gap-2",children:[(0,r.jsx)(c.Z,{className:"h-4 w-4"}),"Voice"]})]}),(0,r.jsx)(d.nU,{value:"chat",className:"mt-4",children:(0,r.jsx)("div",{className:"h-[600px]",children:(0,r.jsx)(_,{messages:v,onSendMessage:E,pendingCommand:N,onConfirmCommand:V,isConnected:y,suggestions:k.map(e=>e.command),onSuggestionClick:I})})}),(0,r.jsx)(d.nU,{value:"voice",className:"mt-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(L,{onVoiceData:e=>{w(e)},voiceStatus:j,isConnected:y}),(0,r.jsx)("div",{className:"h-[600px]",children:(0,r.jsx)(_,{messages:v,onSendMessage:E,pendingCommand:N,onConfirmCommand:V,isConnected:y,suggestions:k.map(e=>e.command),onSuggestionClick:I})})]})})]})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(m.Zb,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 text-gray-500"}),(0,r.jsx)("h3",{className:"font-semibold",children:"Quick Commands"})]}),(0,r.jsx)("div",{className:"space-y-2",children:R.map((e,s)=>(0,r.jsx)(u.z,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>E(e),disabled:!y,children:e},s))})]}),(0,r.jsxs)(m.Zb,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4 text-gray-500"}),(0,r.jsx)("h3",{className:"font-semibold",children:"Command Categories"})]}),(0,r.jsx)("div",{className:"space-y-3",children:["container","health","dns","system","alert"].map(e=>{let s=D(e);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"text-sm font-medium capitalize mb-1",children:[e," (",s.length,")"]}),(0,r.jsxs)("div",{className:"text-xs text-gray-600",children:[s.slice(0,3).map(e=>e.command).join(", "),s.length>3&&"..."]})]},e)})})]}),(0,r.jsxs)(m.Zb,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4 text-gray-500"}),(0,r.jsx)("h3",{className:"font-semibold",children:"Tips"})]}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 space-y-2",children:[(0,r.jsx)("li",{children:"• Use natural language or specific commands"}),(0,r.jsx)("li",{children:"• Voice commands are automatically transcribed"}),(0,r.jsx)("li",{children:"• Destructive actions require confirmation"}),(0,r.jsx)("li",{children:'• Type "help" for command list'}),(0,r.jsx)("li",{children:"• Commands are case-insensitive"})]})]}),(0,r.jsx)(f.bZ,{children:(0,r.jsx)(f.X,{children:(0,r.jsxs)("div",{className:"text-xs space-y-1",children:[(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Session ID:"})}),(0,r.jsxs)("p",{className:"font-mono break-all",children:[s.slice(0,20),"..."]}),(0,r.jsx)("p",{className:"mt-2",children:(0,r.jsx)("strong",{children:"User ID:"})}),(0,r.jsx)("p",{className:"font-mono",children:e})]})})})]})]}),(0,r.jsxs)("details",{className:"mt-8",children:[(0,r.jsxs)("summary",{className:"cursor-pointer text-sm text-gray-600 hover:text-gray-900",children:["View All Commands (",Z.length,")"]}),(0,r.jsx)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Z.map((e,s)=>(0,r.jsx)(m.Zb,{className:"p-3",children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("code",{className:"text-sm font-mono",children:e.command}),(0,r.jsx)(x.C,{variant:"outline",className:"text-xs",children:e.category})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.description})]})},s))})]})]})]})}},64308:function(e,s,t){"use strict";t.d(s,{z:function(){return r.z}});var r=t(64308)},57883:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return l},Zb:function(){return c},aY:function(){return d},ll:function(){return o}});var r=t(57437),n=t(2265),a=t(37440);let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});c.displayName="Card";let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("h3",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});o.displayName="CardTitle";let l=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",t),...n})});l.displayName="CardDescription";let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",t),...n})});d.displayName="CardContent",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},99156:function(e,s,t){"use strict";t.d(s,{I:function(){return c}});var r=t(57437),n=t(2265),a=t(37440);let c=n.forwardRef((e,s)=>{let{className:t,type:n,...c}=e;return(0,r.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...c})});c.displayName="Input"},47412:function(e,s,t){"use strict";t.d(s,{X:function(){return l},bZ:function(){return o}});var r=t(57437),n=t(2265),a=t(13027),c=t(37440);let i=(0,a.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=n.forwardRef((e,s)=>{let{className:t,variant:n,...a}=e;return(0,r.jsx)("div",{ref:s,role:"alert",className:(0,c.cn)(i({variant:n}),t),...a})});o.displayName="Alert",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("h5",{ref:s,className:(0,c.cn)("mb-1 font-medium leading-none tracking-tight",t),...n})}).displayName="AlertTitle";let l=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,c.cn)("text-sm [&_p]:leading-relaxed",t),...n})});l.displayName="AlertDescription"},94693:function(e,s,t){"use strict";t.d(s,{C:function(){return i}});var r=t(57437);t(2265);var n=t(13027),a=t(37440);let c=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800",warning:"border-transparent bg-yellow-100 text-yellow-800"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)(c({variant:t}),s),...n})}},70571:function(e,s,t){"use strict";t.d(s,{E:function(){return i}});var r=t(57437),n=t(2265),a=t(52431),c=t(37440);let i=n.forwardRef((e,s)=>{let{className:t,value:n,...i}=e;return(0,r.jsx)(a.fC,{ref:s,className:(0,c.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...i,children:(0,r.jsx)(a.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});i.displayName=a.fC.displayName},85273:function(e,s,t){"use strict";t.d(s,{SP:function(){return l},dr:function(){return o},mQ:function(){return i},nU:function(){return d}});var r=t(57437),n=t(2265),a=t(9385),c=t(37440);let i=a.fC,o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(a.aV,{ref:s,className:(0,c.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...n})});o.displayName=a.aV.displayName;let l=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(a.xz,{ref:s,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...n})});l.displayName=a.xz.displayName;let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(a.VY,{ref:s,className:(0,c.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n})});d.displayName=a.VY.displayName},37440:function(e,s,t){"use strict";t.d(s,{cn:function(){return a},rl:function(){return i},uf:function(){return c}});var r=t(44839),n=t(96164);function a(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.m6)((0,r.W)(s))}function c(e){return e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e.toLocaleString()}function i(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.toFixed(s)}}},function(e){e.O(0,[502,685,513,176,139,239,971,23,744],function(){return e(e.s=76420)}),_N_E=e.O()}]);