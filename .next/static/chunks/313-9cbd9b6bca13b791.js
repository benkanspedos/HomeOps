"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[313],{92474:function(e,t,s){s.d(t,{R:function(){return g}});var r=s(57437),a=s(2265),n=s(57883),o=s(64308),i=s(66706),l=s(37164),c=s(71106),m=s(35231),d=s(27561),u=s(54142),h=s(2842),x=s(9542),p=s(85475),y=s(20153),f=s(86991),j=s(46294);function g(e){let{data:t,timeRange:s,onRangeChange:g,height:v=300,showLegend:w=!0}=e,k=a.useMemo(()=>{let e=t.cpu||[],s=t.memory||[],r=t.network||[],a=e.map((e,t)=>{var a,n;return{time:e.time,cpu:e.value,memory:(null===(a=s[t])||void 0===a?void 0:a.value)||0,network:(null===(n=r[t])||void 0===n?void 0:n.value)||0}});if(a.length>50){let e=Math.ceil(a.length/50);return a.filter((t,s)=>s%e==0)}return a},[t]);return(0,r.jsxs)(n.Zb,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Resource Metrics"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(j.Ph,{value:s,onValueChange:g,children:[(0,r.jsx)(j.i4,{className:"w-32",children:(0,r.jsx)(j.ki,{})}),(0,r.jsxs)(j.Bw,{children:[(0,r.jsx)(j.Ql,{value:"1h",children:"Last Hour"}),(0,r.jsx)(j.Ql,{value:"6h",children:"Last 6 Hours"}),(0,r.jsx)(j.Ql,{value:"24h",children:"Last 24 Hours"}),(0,r.jsx)(j.Ql,{value:"7d",children:"Last 7 Days"}),(0,r.jsx)(j.Ql,{value:"30d",children:"Last 30 Days"})]})]}),(0,r.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>window.location.reload(),className:"h-8 w-8 p-0",children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})}),(0,r.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>{let e=new Blob([[["Time","CPU (%)","Memory (%)","Network (MB)"],...k.map(e=>[e.time,e.cpu.toFixed(2),e.memory.toFixed(2),e.network.toFixed(2)])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="metrics-".concat(s,"-").concat(Date.now(),".csv"),r.click(),window.URL.revokeObjectURL(t)},className:"h-8 w-8 p-0",children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})}),(0,r.jsx)(o.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,r.jsx)(c.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsx)(m.h,{width:"100%",height:v,children:(0,r.jsxs)(d.T,{data:k,children:[(0,r.jsxs)("defs",{children:[(0,r.jsxs)("linearGradient",{id:"colorCpu",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),(0,r.jsxs)("linearGradient",{id:"colorMemory",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]}),(0,r.jsxs)("linearGradient",{id:"colorNetwork",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#f59e0b",stopOpacity:.8}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#f59e0b",stopOpacity:0})]})]}),(0,r.jsx)(u.q,{strokeDasharray:"3 3",className:"opacity-30"}),(0,r.jsx)(h.K,{dataKey:"time",className:"text-xs",tick:{fontSize:11},interval:"preserveStartEnd"}),(0,r.jsx)(x.B,{className:"text-xs",tick:{fontSize:11},domain:[0,100]}),(0,r.jsx)(p.u,{content:(0,r.jsx)(e=>{let{active:t,payload:s,label:a}=e;return t&&s&&s.length?(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg shadow-lg border",children:[(0,r.jsx)("p",{className:"text-sm font-medium mb-2",children:a}),s.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,r.jsxs)("span",{className:"text-xs",style:{color:e.color},children:[e.name,":"]}),(0,r.jsxs)("span",{className:"text-xs font-medium",children:[e.value.toFixed(2),"network"===e.name?" MB":"%"]})]},t))]}):null},{})}),w&&(0,r.jsx)(y.D,{wrapperStyle:{fontSize:"12px"},iconType:"line"}),(0,r.jsx)(f.u,{type:"monotone",dataKey:"cpu",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorCpu)",strokeWidth:2,name:"CPU"}),(0,r.jsx)(f.u,{type:"monotone",dataKey:"memory",stroke:"#10b981",fillOpacity:1,fill:"url(#colorMemory)",strokeWidth:2,name:"Memory"}),t.network&&t.network.length>0&&(0,r.jsx)(f.u,{type:"monotone",dataKey:"network",stroke:"#f59e0b",fillOpacity:1,fill:"url(#colorNetwork)",strokeWidth:2,name:"Network",yAxisId:"right"})]})}),0===k.length&&(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("p",{className:"text-gray-500",children:"No data available for the selected time range"})})]})}},69976:function(e,t,s){s.d(t,{Bf:function(){return o},k7:function(){return i}});var r=s(53567),a=s(2265),n=s(14438);function o(){let{containerId:e,hours:t=24,refreshInterval:s=3e4}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[o,i]=(0,a.useState)(t),l=(0,r.a)({queryKey:["metrics",e,o],queryFn:()=>e?n.CV.getMetrics(e,o):Promise.resolve([]),enabled:!!e,refetchInterval:s,staleTime:1e4}),c=(0,r.a)({queryKey:["systemMetrics"],queryFn:()=>n.CV.getSystemHealth(),refetchInterval:s,staleTime:1e4}),m=(0,r.a)({queryKey:["currentMetrics",e],queryFn:()=>e?n.CV.getCurrentMetrics(e):Promise.resolve(null),enabled:!!e,refetchInterval:5e3,staleTime:2e3}),d=(0,a.useMemo)(()=>{let e=l.data||[];return{cpu:e.map(e=>({time:new Date(e.timestamp).toLocaleTimeString(),value:e.cpuPercent,label:"".concat(e.cpuPercent.toFixed(1),"%")})),memory:e.map(e=>({time:new Date(e.timestamp).toLocaleTimeString(),value:e.memoryPercent,label:"".concat(e.memoryUsageMB.toFixed(0)," MB")})),network:e.map(e=>({time:new Date(e.timestamp).toLocaleTimeString(),value:(e.networkRxBytes+e.networkTxBytes)/1024/1024,label:"".concat(((e.networkRxBytes+e.networkTxBytes)/1024/1024).toFixed(2)," MB")})),disk:e.map(e=>({time:new Date(e.timestamp).toLocaleTimeString(),value:e.diskUsageMB||0,label:"".concat((e.diskUsageMB||0).toFixed(0)," MB")}))}},[l.data]),u=(0,a.useMemo)(()=>{let e=l.data||[];if(0===e.length)return null;let t=e.map(e=>e.cpuPercent),s=e.map(e=>e.memoryPercent);return{cpu:{average:t.reduce((e,t)=>e+t,0)/t.length,max:Math.max(...t),min:Math.min(...t)},memory:{average:s.reduce((e,t)=>e+t,0)/s.length,max:Math.max(...s),min:Math.min(...s)}}},[l.data]);return{containerMetrics:l.data||[],systemMetrics:c.data,currentMetrics:m.data,chartData:d,statistics:u,timeRange:o,setTimeRange:e=>{i(e),l.refetch()},isLoadingContainer:l.isLoading,isLoadingSystem:c.isLoading,isLoadingCurrent:m.isLoading,containerError:l.error,systemError:c.error,currentError:m.error,refetchContainer:l.refetch,refetchSystem:c.refetch,refetchCurrent:m.refetch}}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4,{data:t,error:s,isLoading:a,refetch:o}=(0,r.a)({queryKey:["systemMetrics"],queryFn:()=>n.CV.getSystemHealth(),refetchInterval:e,staleTime:1e4});return{metrics:t,isLoading:a,error:s,refetch:o}}}}]);