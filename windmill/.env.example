# ===============================================================================
# HomeOps Windmill Platform - Environment Variables Template
# ===============================================================================
#
# ðŸš¨ CRITICAL SECURITY NOTICE ðŸš¨
#
# This file is a TEMPLATE only. DO NOT store actual credentials here!
#
# HOW TO USE THIS FILE:
# 1. This file serves as documentation for required environment variables
# 2. Set actual values in Windmill UI: Workspace Settings > Environment Variables
# 3. For sensitive credentials, use Windmill Resources or Variables instead
# 4. NEVER commit actual secrets to Git
#
# ===============================================================================

# ===============================================================================
# WINDMILL CONNECTION (For GitHub Actions Sync)
# ===============================================================================

# Windmill server URL (set in GitHub Secrets as WMILL_URL)
# Example: https://windmill.yourdomain.com
WMILL_URL=https://your-windmill-instance.com

# Windmill authentication token (set in GitHub Secrets as WMILL_TOKEN)
# Generate in Windmill UI: User Menu > Tokens > Create Token
WMILL_TOKEN=your_token_here

# ===============================================================================
# PLATFORM CONFIGURATION
# ===============================================================================

# Platform identification
PLATFORM_NAME=HomeOps
PLATFORM_ENV=production  # Options: production, staging, development

# Timezone for scheduled workflows
TZ=America/New_York

# ===============================================================================
# LOGGING CONFIGURATION
# ===============================================================================

LOG_LEVEL=info  # Options: debug, info, warn, error
LOG_FORMAT=json  # Options: json, text
LOG_RETENTION_DAYS=30

# ===============================================================================
# DATABASE CONNECTIONS
# ===============================================================================
# Store actual connection strings as Windmill Resources, not environment variables!
# Path: platform/postgres_main, platform/redis_cache, etc.

# PostgreSQL Main Database
# Set in Windmill UI as Resource: platform/postgres_main
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_DB=homeops
# POSTGRES_USER=your_user
# POSTGRES_PASSWORD=your_secure_password

# Redis Cache
# Set in Windmill UI as Resource: platform/redis_cache
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=your_redis_password

# TimescaleDB Metrics
# Set in Windmill UI as Resource: platform/timescaledb_metrics
# TIMESCALE_HOST=localhost
# TIMESCALE_PORT=5432
# TIMESCALE_DB=homeops_metrics
# TIMESCALE_USER=your_user
# TIMESCALE_PASSWORD=your_secure_password

# Database connection pool settings
DB_CONNECTION_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=30000  # milliseconds

# ===============================================================================
# DOCKER CONFIGURATION
# ===============================================================================

DOCKER_HOST=unix:///var/run/docker.sock
DOCKER_COMPOSE_PROJECT_NAME=homeops

# Docker Registry (if using private registry)
# Set in Windmill UI as Resource: platform/docker_registry_credentials
# DOCKER_REGISTRY_URL=ghcr.io
# DOCKER_REGISTRY_USERNAME=your_username
# DOCKER_REGISTRY_PASSWORD=your_registry_token

# ===============================================================================
# MONITORING & ALERTING
# ===============================================================================

# Health check configuration
HEALTH_CHECK_TIMEOUT=30  # seconds
ALERT_COOLDOWN_PERIOD=300  # seconds (5 minutes)

# Monitoring thresholds
CPU_USAGE_THRESHOLD=80  # percentage
MEMORY_USAGE_THRESHOLD=85  # percentage
DISK_USAGE_THRESHOLD=90  # percentage
RESPONSE_TIME_THRESHOLD=5000  # milliseconds
ERROR_RATE_THRESHOLD=5  # percentage

# ===============================================================================
# NOTIFICATION CHANNELS
# ===============================================================================

# Slack Integration
# Set in Windmill UI as Resource: platform/slack_webhook
ENABLE_SLACK_NOTIFICATIONS=true
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_DEFAULT_CHANNEL=#homeops-alerts

# Email Notifications (optional)
ENABLE_EMAIL_NOTIFICATIONS=false
# EMAIL_SMTP_HOST=smtp.gmail.com
# EMAIL_SMTP_PORT=587
# EMAIL_FROM=homeops@yourdomain.com
# EMAIL_TO=admin@yourdomain.com

# ===============================================================================
# GITHUB INTEGRATION
# ===============================================================================

# GitHub API Token (for deployment operations)
# Set in Windmill UI as Resource: platform/github_api_token
# GITHUB_API_TOKEN=ghp_your_github_token
GITHUB_REPOSITORY_OWNER=your_username
GITHUB_REPOSITORY_NAME=HomeOps

# ===============================================================================
# MAINTENANCE WINDOWS
# ===============================================================================

MAINTENANCE_WINDOW_START=02:00  # 2 AM (24-hour format)
MAINTENANCE_WINDOW_DURATION=120  # minutes

# ===============================================================================
# DATA RETENTION POLICIES
# ===============================================================================

LOG_RETENTION_DAYS=30
BACKUP_RETENTION_DAYS=90
METRICS_RETENTION_DAYS=365
WORKFLOW_RUN_RETENTION_DAYS=30

# ===============================================================================
# PERFORMANCE & SCALING
# ===============================================================================

# Worker configuration
MAX_CONCURRENT_WORKFLOWS=10
WORKER_MEMORY_LIMIT=2GB
WORKER_TIMEOUT=600  # seconds

# Caching
ENABLE_RESULT_CACHING=true
CACHE_TTL=3600  # seconds

# Rate limiting
RATE_LIMIT_PER_USER=100  # requests per minute
RATE_LIMIT_PER_IP=200  # requests per minute

# ===============================================================================
# DEPLOYMENT CONFIGURATION
# ===============================================================================

# Rollback settings
AUTO_ROLLBACK=true
ROLLBACK_ON_HEALTH_CHECK_FAILURE=true

# Health check settings
HEALTH_CHECK_ATTEMPTS=3
HEALTH_CHECK_INTERVAL=30  # seconds
HEALTH_CHECK_TIMEOUT_DEPLOY=10  # seconds

# Deployment strategy
DEFAULT_DEPLOYMENT_STRATEGY=rolling  # Options: rolling, blue-green, canary

# ===============================================================================
# SECURITY SETTINGS
# ===============================================================================

# Audit logging
AUDIT_LOG_RETENTION=90  # days
LOG_SENSITIVE_DATA=false

# Secrets rotation reminder
ROTATE_SECRETS_REMINDER=90  # days

# Network security - allowed outbound domains
ALLOWED_OUTBOUND_DOMAINS=api.github.com,slack.com,docker.io

# ===============================================================================
# SUBPROJECT-SPECIFIC INTEGRATIONS
# ===============================================================================

# Financial Tracker (ATOM)
# Set in Windmill UI as Resource: financial/alpaca_api_key
# ALPACA_API_KEY=your_alpaca_key
# ALPACA_SECRET_KEY=your_alpaca_secret
# FMP_API_KEY=your_fmp_key

# Media Stack
# Set in Windmill UI as Resource: media/api_keys
# RADARR_API_KEY=your_radarr_key
# SONARR_API_KEY=your_sonarr_key
# PROWLARR_API_KEY=your_prowlarr_key

# Music Discovery
# Set in Windmill UI as Resource: music/slskd_credentials
# SLSKD_API_URL=http://localhost:5030
# SLSKD_API_KEY=your_slskd_key

# DNS Management
# Set in Windmill UI as Resource: dns/pihole_credentials
# PIHOLE_API_URL=http://localhost:8080
# PIHOLE_API_TOKEN=your_pihole_token

# ===============================================================================
# DEVELOPMENT & TESTING
# ===============================================================================

# Development mode (only in dev workspace)
# DEV_MODE=false
# MOCK_EXTERNAL_APIS=false
# DRY_RUN_DEPLOYMENTS=false

# ===============================================================================
# SETUP INSTRUCTIONS
# ===============================================================================
#
# 1. GITHUB SECRETS (for CI/CD sync):
#    - Go to GitHub > Repository > Settings > Secrets and variables > Actions
#    - Add secret: WMILL_URL (your Windmill server URL)
#    - Add secret: WMILL_TOKEN (generate in Windmill UI)
#
# 2. WINDMILL ENVIRONMENT VARIABLES:
#    - Go to Windmill UI > Workspace: homeops-platform > Settings > Environment Variables
#    - Add non-sensitive variables from this file
#
# 3. WINDMILL RESOURCES (for sensitive credentials):
#    - Go to Windmill UI > Workspace: homeops-platform > Resources
#    - Create resources for:
#      - platform/postgres_main (PostgreSQL connection)
#      - platform/redis_cache (Redis connection)
#      - platform/slack_webhook (Slack webhook URL)
#      - platform/github_api_token (GitHub token)
#      - platform/docker_registry_credentials (Docker registry)
#
# 4. WINDMILL VARIABLES (for configuration values):
#    - Go to Windmill UI > Workspace: homeops-platform > Variables
#    - Create variables for non-sensitive but important configs
#
# For detailed setup instructions, see: windmill/SETUP-GUIDE.md
#
# ===============================================================================
